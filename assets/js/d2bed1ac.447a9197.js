"use strict";(self.webpackChunkkuby_docs=self.webpackChunkkuby_docs||[]).push([[915],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),u=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(i.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,y=d["".concat(i,".").concat(m)]||d[m]||c[m]||o;return n?r.createElement(y,l(l({ref:t},p),{},{components:n})):r.createElement(y,l({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var u=2;u<o;u++)l[u]=n[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9307:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return i},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return c}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),l=["components"],s={id:"after-the-deploy",title:"After the Deploy",sidebar_label:"After the Deploy",slug:"/after-the-deploy"},i=void 0,u={unversionedId:"after-the-deploy",id:"after-the-deploy",title:"After the Deploy",description:"Great, you've deployed your app! Now what?",source:"@site/docs/after_the_deploy.md",sourceDirName:".",slug:"/after-the-deploy",permalink:"/docs/after-the-deploy",editUrl:"https://github.com/getkuby/kuby-core/edit/master/docs/docs/after_the_deploy.md",tags:[],version:"current",frontMatter:{id:"after-the-deploy",title:"After the Deploy",sidebar_label:"After the Deploy",slug:"/after-the-deploy"},sidebar:"sidebar",previous:{title:"Quick Start Guide",permalink:"/docs/"},next:{title:"Developing with Kuby",permalink:"/docs/development"}},p={},c=[{value:"Other Useful Commands",id:"other-useful-commands",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3}],d={toc:c};function m(e){var t=e.components,n=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Great, you've deployed your app! Now what?"),(0,o.kt)("p",null,"First of all, you can always ask Kuby what's possible by running"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bundle exec kuby --help\n")),(0,o.kt)("p",null,"Check the status of your deployment by running:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bundle exec kuby -e production remote status\n")),(0,o.kt)("p",null,"The obvious way to see if your app is working or not is to try to access it over the Internet. If the deploy succeeded (and ",(0,o.kt)("inlineCode",{parentName:"p"},"kuby remote status")," indicates everything's up and running) but your app is erroring out, chances are something is misconfigured. A good place to look when diagnosing issues is your Rails server log. Run the following command to see a live log tail:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bundle exec kuby -e production remote logs\n")),(0,o.kt)("p",null,"Establish a shell session by running:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bundle exec kuby -e production remote shell\n")),(0,o.kt)("p",null,"Establish a Rails console session by running:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bundle exec kuby -e production remote console\n")),(0,o.kt)("p",null,"Establish a database console session by running:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bundle exec kuby -e production remote dbconsole\n")),(0,o.kt)("h3",{id:"other-useful-commands"},"Other Useful Commands"),(0,o.kt)("p",null,"Print out all the Dockerfiles:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bundle exec kuby -e production dockerfiles\n")),(0,o.kt)("p",null,"You can also show a Dockerfile for a particular image (using its identifier):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bundle exec kuby -e production dockerfiles --only app\n")),(0,o.kt)("p",null,"Print out all your Kubernetes configs:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bundle exec kuby -e production resources\n")),(0,o.kt)("p",null,"You can also specify Kind and/or Name filters:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'bundle exec kuby -e production resources --kind service --name ".+-(web|rpc)"\n')),(0,o.kt)("p",null,"NOTE: ",(0,o.kt)("inlineCode",{parentName:"p"},"--kind")," filters for an exact match and ",(0,o.kt)("inlineCode",{parentName:"p"},"--name")," accepts regular expressions."),(0,o.kt)("p",null,"Run an arbitrary kubectl command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bundle exec kuby -e production kubectl -- [cmd]\n")),(0,o.kt)("p",null,"Run an arbitrary kubectl command in the app's Kubernetes namespace by passing the ",(0,o.kt)("inlineCode",{parentName:"p"},"-N")," flag:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"bundle exec kuby -e production kubectl -N -- [cmd]\n")),(0,o.kt)("h3",{id:"troubleshooting"},"Troubleshooting"),(0,o.kt)("p",null,"The following list is not exhaustive. It mostly contains solutions to issues that have been reported via GitHub."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"The TLS certificate for my app's domain name isn't working.")),(0,o.kt)("p",{parentName:"li"},"TLS certificate issues are most commonly caused by DNS propagation lag. Kuby uses the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/cert-manager/cert-manager"},"cert-manager")," operator to automatically request and install TLS certificates from ",(0,o.kt)("a",{parentName:"p",href:"https://letsencrypt.org/"},"Let's Encrypt"),". cert-manager works by creating a special route inside your application that responds to ACME challenges. Let's Encrypt will make a request to this special route and issue the TLS certificate if the response matches what Let's Encrypt expects. This is how Let's Encrypt verifies you actually own the domain name. For this whole dance to work however, Let's Encrypt has to be able to connect to your app. It does so by querying a DNS server. DNS servers map domain names to IP addresses. If you've only just configured the DNS for your domain name within the last 24-48 hours, it's likely DNS information has not propagated (read: been copied) to all the DNS servers around the globe. Often the solution is to simply wait a few hours, although the propagation process can take up to a few days. cert-manager will try periodically to request the certificate, so no additional intervention is usually necessary.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},'"unable to recognize ',"[url]",'" during setup or deploy.')),(0,o.kt)("p",{parentName:"li"},"Often this error indicates your Kubernetes cluster is out-of-date. You'll need to use a version Kuby supports. At the time of this writing, Kuby supports Kubernetes versions 1.20 - 1.23."))))}m.isMDXComponent=!0}}]);